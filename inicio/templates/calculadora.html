<!DOCTYPE html>
<!-- Documento HTML que crea una calculadora de distancias de siembra -->
<html>
<head>
    <!-- T√≠tulo que aparece en la pesta√±a del navegador -->
    <title>Calculadora de Distancias</title>

    <!-- Estilos CSS para el dise√±o visual -->
    <style>
        /* Estilo general de la p√°gina */
        body {
            font-family: "Segoe UI", Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #eef5ea;

            /* Imagen de fondo fija */
            background-image: url("https://wallpapers.com/images/high/beautiful-minecraft-cherry-blossoms-8zlaxmeiqm93j24f.webp");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;

            color: #2d472c;
        }

        /* T√≠tulo principal */
        h1 {
            margin-top: 20px;
            font-size: 32px;
            text-shadow: 1px 1px 2px #fff;
        }

        /* Texto descriptivo */
        p {
            font-size: 16px;
            color: #3b5939;
        }

        /* Contenedor del formulario */
        fieldset {
            background: white;
            border: 2px solid #4c7c4f;
            border-radius: 10px;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            margin: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        /* T√≠tulo del fieldset */
        legend {
            background: #4c7c4f;
            padding: 8px 14px;
            border-radius: 6px;
            color: white;
            font-size: 18px;
        }

        /* Tabla del formulario */
        table {
            width: 100%;
        }

        /* Campos de entrada */
        input {
            width: 95%;
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #7aa87e;
            background: #f6fff5;
        }

        /* Bot√≥n de c√°lculo */
        button {
            padding: 12px 20px;
            font-size: 16px;
            background: #4c7c4f;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
            transition: 0.2s;
        }

        /* Efecto al pasar el cursor */
        button:hover {
            background: #3d6a40;
            transform: scale(1.05);
        }

        /* L√≠nea divisoria */
        hr {
            width: 90%;
            max-width: 700px;
            border: 1px solid #c9dec9;
            margin: 25px auto;
        }

        /* T√≠tulo de resultados */
        h2 {
            text-align: center;
            font-size: 26px;
            color: #365b37;
            text-shadow: 1px 1px 2px #fff;
        }

        /* √Årea donde se muestran los resultados */
        pre {
            background: #f0f9ef;
            border: 1px solid #c0d9c0;
            border-radius: 10px;
            padding: 20px;
            overflow-x: auto;
            white-space: pre;
        }

        /* Bot√≥n para regresar */
        .btn-regresar {
            display: block;
            width: 250px;
            margin: 30px auto 40px auto;
            padding: 12px;
            text-align: center;
            background: #4c7c4f;
            color: white;
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
            border-radius: 8px;
            transition: 0.3s;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
        }

        /* Efecto hover del bot√≥n regresar */
        .btn-regresar:hover {
            background: #3d6a40;
            transform: scale(1.05);
        }
    </style>
</head>

<body>

<!-- Encabezado centrado -->
<center>
    <h1 style="color:white; text-shadow:2px 2px 6px black;">
        üå± Calculadora de Distancias de Siembra üå±
    </h1>

    <!-- Descripci√≥n del funcionamiento -->
    <p style="color:white; text-shadow:1px 1px 4px black;">
        <b>
        Ingresa los datos y obt√©n la distribuci√≥n recomendada, dimensiones del terreno<br>
        y un esquema visual de c√≥mo deben quedar las plantas.
        </b>
    </p>
</center>

<hr>

<!-- Formulario de entrada de datos -->
<fieldset>
    <legend><b>üìã Datos de siembra</b></legend>

    <!-- Al enviar el formulario se ejecuta la funci√≥n calcular() -->
    <form onsubmit="event.preventDefault(); calcular();">
        <table>
            <tr>
                <td><b>Cantidad de plantas:</b></td>
                <td>
                    <input type="number" id="plantas" min="1" max="1000" required>
                </td>
            </tr>

            <tr>
                <td><b>Distancia entre plantas (m):</b></td>
                <td>
                    <input type="number" id="dist_planta" step="0.1" min="0.1" max="100" required>
                </td>
            </tr>

            <tr>
                <td><b>Distancia entre hileras (m):</b></td>
                <td>
                    <input type="number" id="dist_hilera" step="0.1" min="0.1" max="100" required>
                </td>
            </tr>

            <tr>
                <td colspan="2" align="center">
                    <button type="submit">CALCULAR</button>
                </td>
            </tr>
        </table>
    </form>
</fieldset>

<hr>

<!-- T√≠tulo de resultados -->
<h2 style="color:white; text-shadow:2px 2px 6px black;">
    üìå RESULTADOS
</h2>

<!-- √Årea donde se muestran los resultados -->
<fieldset>
    <legend><b>Informaci√≥n generada</b></legend>
    <pre id="resultado" style="font-size: 15px; font-family: Consolas;"></pre>
</fieldset>

<!-- Bot√≥n para regresar a la p√°gina principal -->
<a href="{% url 'inicio' %}" class="btn-regresar">‚¨Ö Regresar al inicio</a>

<!-- C√≥digo JavaScript -->
<script>
/* Funci√≥n principal que realiza los c√°lculos */
function calcular() {

    // Obtener valores ingresados por el usuario
    let plantas = parseInt(document.getElementById("plantas").value);
    let dp = parseFloat(document.getElementById("dist_planta").value);
    let dh = parseFloat(document.getElementById("dist_hilera").value);

    // Validaci√≥n de cantidad m√°xima
    if (plantas > 1000) {
        alert("‚ùå No puedes ingresar m√°s de 1000 plantas.");
        return;
    }

    // Validaci√≥n de valores positivos
    if (plantas <= 0 || dp <= 0 || dh <= 0) {
        alert("‚ùå Los valores deben ser mayores a cero.");
        return;
    }

    // C√°lculo de filas y columnas recomendadas
    let columnas = Math.ceil(Math.sqrt(plantas));
    let filas = Math.ceil(plantas / columnas);

    // Dimensiones del terreno
    let ancho = (columnas - 1) * dp;
    let largo = (filas - 1) * dh;
    let area = ancho * largo;

    // Variable para el dibujo ASCII
    let dibujo = "";

    // Generar esquema visual de las plantas
    for (let f = 0; f < filas; f++) {
        for (let c = 0; c < columnas; c++) {
            dibujo += "[X]";
            if (c < columnas - 1) dibujo += "---" + dp + "m---";
        }
        dibujo += "\n";

        if (f < filas - 1) {
            for (let c = 0; c < columnas; c++) {
                dibujo += " | ";
                if (c < columnas - 1) dibujo += "           ";
            }
            dibujo += "\n";

            for (let c = 0; c < columnas; c++) {
                dibujo += dh + "m";
                if (c < columnas - 1) dibujo += "         ";
            }
            dibujo += "\n";

            for (let c = 0; c < columnas; c++) {
                dibujo += " | ";
                if (c < columnas - 1) dibujo += "           ";
            }
            dibujo += "\n";
        }
    }

    // Mostrar resultados en pantalla
    document.getElementById("resultado").textContent =
        "üå± Cantidad de plantas: " + plantas + "\n" +
        "üåæ Filas sugeridas: " + filas + "\n" +
        "üåæ Columnas sugeridas: " + columnas + "\n" +
        "üìè Ancho del terreno: " + ancho.toFixed(2) + " m\n" +
        "üìè Largo del terreno: " + largo.toFixed(2) + " m\n" +
        "üìê √Årea m√≠nima necesaria: " + area.toFixed(2) + " m¬≤\n\n" +
        "üìç Distribuci√≥n sugerida:\n\n" +
        dibujo;
}
</script>

</body>
</html>
